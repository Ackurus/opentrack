add_compile_definitions(PS3EYE_DEBUG)

add_subdirectory("ps3eye-driver")

if(TARGET ps3eye-driver)
    otr_module(video-ps3eye)
    if(WIN32)
        set(path "${SDK_LIBUSB}/libusb-1.0.dll")
        if(EXISTS "${path}")
            otr_install_lib("${path}" "${opentrack-hier-pfx}")
        endif()
    endif()
endif()

if(TARGET ps3eye-test)
    install(TARGETS "ps3eye-test" DESTINATION "${opentrack-hier-pfx}")
    if(WIN32)
        foreach(k ${SDL2_LIBRARIES})
            get_filename_component(path "${k}" PATH)
            set(lib "${path}/SDL2.dll")
            if(EXISTS "${lib}")
                otr_install_lib("${lib}" "${opentrack-hier-pfx}")
                break()
            endif()
        endforeach()
    endif()
endif()
